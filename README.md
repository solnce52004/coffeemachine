
*************************

### Тестовое задание:

**Написать программу для работы кофеварки, управляемую через браузер**.<br>
Использовать **SpringFramework** или **SpringBoot**.<br>
Вести учет работы в **PostgresSQL**.<br>
Интерфейс не нужен, запросы через на **SwaggeUI**.

*************************

Во избежание разночтений, ввиду отсутствия уточняющих деталей ТЗ, ниже приведено описание реализации поставленной задачи с соблюдением основных требований.

Кофемашина - одна в офисе, все сотрудники имеют к ней доступ в порядке живой очереди, работает однопоточно (Executors.newSingleThreadExecutor()).

Доступные шаги использования:
1. Включить питание
2. Запустить автоматическую проверку/пополнение кофе и воды
3. Нажать кнопку "Варить кофе"
4. Выключить питание

Доступно экстренное выключение на любом этапе.<br>
Проверить/пополнить ресурсы можно сразу после приготовления кофе, не выключая кофеварку.<br>
В кофеварке крепость и объем приготовляемого напитка не регулируется.<br>
Все запросы идемпотентны.

#### Реализация:
В кодовой базе проекта используются актуальные версии библиотек (Spring Boot 2.6.3).<br>
Основа проекта - Spring Statemachine.

1. Персист состояний Statemachine в базу (Postgres)
2. Сохранение изменений состояний бизнес-сущностей в базу (Postgres) (добавлены индексы на ключевых полях для оптимизации запросов)
3. Версионирование изменений базы данных (Flyway)
4. Логирование (архивирование) в локальную директорию (Log4j2)
5. Обработка http-ошибок
6. Юнит-тесты
7. Описание api-методов (SwaggeUI)
8. UML-диаграмма

#### Использованы паттерны проектированя (яркие примеры в сервисах-обработчиках запросов и переходов состояний):
1. State
2. Strategy
3. Command 
4. Register
5. Chain of responsibility

#### Требования
- JDK 11
- gradle 7.4

#### Профили:
- dev - По умолчанию, база данных H2 (In memory)
- prod - База данных PostgreSQL
- для тестирования - отдельная база (и логирование в отдельную директорию)

#### Документация API
[Swagger Api Documentation](http://localhost:8010/coffeemachine/swagger-ui/)

| Method | Description | URL |
|----------------|---------|----------------|
| GET | Включить | {URL}/coffeemachine/api/v1/turn-on |
| GET | Проверка ингредиентов | {URL}/coffeemachine/api/v1/check-resources |
| GET | Варить | {URL}/coffeemachine/api/v1/start-brew |
| GET | Выключить | {URL}/coffeemachine/api/v1/turn-off |
